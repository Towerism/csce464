* Virtual Carrier Sensing (RTS/CTS)
** Basic RTS/CTS
- RTS specifies duration of transmission
  - Sent by the Sender
- CTS also includes the duration
  - Sent by the Receiver
- Any host hearing RTS or CTS will stay silent
- A third node may not receive RTS and still cause collision with Ack reception
  at the sender.
- Assume SINR-threshold model
- SINR $\beta$ necessary for reliable delivery
- SINR for RTS reception at a third node $C$ is upper bounded as $SINR_C\leq P_tg_{AC}/N$
- If $C$ transmits while $A$ is receiving an Ack from $B$, $SINR$ for Ack
  reception at $A$ is upper bounded as $SINR_A\leq\frac{P_tg_{BA}}{P_tg_{CA}+N}$
** Modification
- Greater protection form interference
- Reduce book-keeping with multiple nearby transmitters
- For a third node which hears all of RTS, CTS and Ack, in addition for being
  silent for the duration of the CTS and Ack packets, it will also be silent for
  the duration of data.
- For a node which is a hidden terminal and does not hear the RTS packet, but
  rather only hears the CTS and Ack packets, will now not only remain silent for
  the duration of data but also the duration of Ack.
** Physical and Virtual CS
- PCS and VCS can be used simultaneously
- Channel assumed idle ony if _both_ PCS and VS indicate that the channel is
  idle
** p-Persistence
- Carrier Sense does not eliminate collisions altogether (e.g. simultaneous transmission)
- *A mechanism is needed to reduce collision probability*
- A dialog may consist of
  - Data
  - Data-Ack
  - RTS-CTS-Data-Ack
- Dialog begins at a valid transmission opportunity. With physical carrier
  sense, we need to define this further.
- Recall: slotted access used slot size = packet size
- Therefore minimize packet size (this still can't prevent two nodes from
  transmitting simultaneously)
- At each _valid_ transmission opportunity, a host may attempt to transmit a
  packet only with probability $p$.
- Slot size $\delta=\tau+\sigma$
  - Recall:
    - $\tau$ is propagation delay
    - $\sigma$ is carrier sense delay
- Back-of-the-envelope analysis
  - Consider $n$ nodes that can sense each other
  - $p$ = access probability for each slot
    - $P_{success}=np(1-p)^{n-1}$
    - $P_{none}=(1-p)^n$
    - $P_{collision}=1-P_{success}-P_{none}$
- Duration required for a transmission or collision:
  - Data length + slot size ($L+\delta$)
  - $L+\tau+\sigma$
- Efficiency of channel access (the fraction of time, for which data is
  transmitted reliably):
  - $\frac{P_{success}L}{P_{none}\delta+(1-P_{none})(L+\delta)}=\frac{P_{success}L}{\delta+(1-P_{none})L}$
** Backoff Intervals
- Skip a bounded number of valid opportunities before transmitting a packet
- Initialize a counter by a backoff interval chosen uniformaly in range [Bmin, Bmax]
- Decrement counter after each slot in which channel is idle
- Transmit on a valid opportunity if counter is 0
** Responding to packet loss
- Packet loss may occur from simultaneous or concurrent transmission for example
- Reduce simultaneous transmission by reducing access probability
- Achieve this by increasing the range of the backoff interval
- E.g. exponential backoff $[0, cw-1]\rightarrow[0, 2cw-1]$ (for contention window $cw$)
** IEEE 802.11
*** Distributed Coordination Function (DCF)
- PCS and VCS (RTS-CTS)
- Contention window ($cw$): backoff chosen uniformly $[0,cw-1]$
- Exponential backoff after a packet loss
- Contention window reset to $CW_{min}$ on a success
*** Priorities
- defined through different inter frame spaces (IFS)
- no guaranteed, hard priorities
- SIFS (Short IFS)
  - Highest priority, for ACK, CTS, polling response
- PIFS (PCS IFS)
  - medium priority, for time-bounded service using PCF (point coordination function)
- DIFS (DCF IFS)
  - Lowest priority, for asynchronous data service
*** Wireless MAC
- Distributed and centralized MAC components
  - DCF
    - CSMA/CA (carrier sense multiple access collision avoidance) protocol
    - Suitable for multi-hop ad hoc networking
  - PCF
- Inter-frame spacing: SIFS and DIFS
*** DCF
- Uses RTS-CTS to avoid hidden terminal problem
  - Any overhearing of either packet causes that node to stay quiet for duration
    of the dialog
- Uses ACK for reliability
  - For the duration of data, other nodes stay quiet to avoid interference
    during ACK
